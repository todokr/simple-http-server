# æ–°ã—ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®å­¦ã³æ–¹
## HTTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã£ã¦å­¦ã¶Java, Scala, Clojure

@todokr

+++

## èª°ã ğŸ¤”

<img src="assets/img/icon.jpg" width="200px" height="200px" />

- ç”°æ‰€ é§¿ä½‘ @todokr
- æ ªå¼ä¼šç¤¾ãƒ“ã‚ºãƒªãƒ¼ãƒ Scalaã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
- æ±‚äººæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã®ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼é–‹ç™ºãªã©
- Unicode EmojiãŒå¥½ãğŸ™‹
- Emacsãªãƒã‚ªè€å®³

+++

## æ–°ã—ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’å­¦ã¶

- ã‚¹ã‚­ãƒ«ã‚„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã®å¹…ã‚’åºƒã’ã‚‹ãŸã‚|
- ç´”ç²‹ãªæ¥½ã—ã¿ã®ãŸã‚|

+++

## HTTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã£ã¦ã¿ã‚‹ã®ãŒãŠã™ã™ã‚ğŸ¤“

+++

## ä»Šæ—¥ãŠè©±ã—ã™ã‚‹ã“ã¨

- ãªãœHTTPã‚µãƒ¼ãƒãƒ¼?
- Scala, Clojureã«ã¤ã„ã¦
- HTTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚ŠãªãŒã‚‰å­¦ã¼ã†
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™
  - Socketã®æ‰±ã„
  - Input/OutputStreamã®æ‰±ã„
  - æ–‡å­—åˆ—/ãƒã‚¤ãƒˆåˆ—ã®æ‰±ã„
  - æ­£è¦è¡¨ç¾
  - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
  - ãƒªã‚½ãƒ¼ã‚¹ã®é–‹æ”¾
  - ä¸¦åˆ—å‡¦ç†
- HTTPã‚µãƒ¼ãƒãƒ¼ã®æ¬¡ã¯?

+++

# ãªãœHTTPã‚µãƒ¼ãƒãƒ¼?ğŸ¤”

+++

## æ–°ã—ã„è¨€èªã‚’å­¦ã¶

- Hello world, FizzBuzzã‚’ã‚„ã‚‹
- æ›¸ç±ã‚’èª­ã‚€
- TODOã‚¢ãƒ—ãƒªãªã©ç°¡å˜ãª**Webã‚µãƒ¼ãƒ“ã‚¹**ã‚’ä½œã‚‹
- etc...

+++

## Webã‚µãƒ¼ãƒ“ã‚¹ï¼ŸğŸ¤”

+++

## Webã‚µãƒ¼ãƒ“ã‚¹ã«ã¯DBãŒã‚ã‚‹
- ã¨ã‚Šã‚ãˆãšH2ã§è‰¯ã„ã‹...|
- MySQLWorkBenchã§ä½œã£ãŸDDLãŒæµã›ãªã„ï¼|
- Docker?ã¨ã‹ã„ã†ã‚„ã¤ã§?MySQLã‚’å‹•ã‹ã™ã®ãŒãƒŠã‚¦ã„ã‚“ã§ã™ã‹ã­?|
- docker exec...ãªã‚“ã ã£ã‘ğŸ˜‡|

+++

## Webã‚µãƒ¼ãƒ“ã‚¹ã«ã¯ç”»é¢ãŒã‚ã‚‹
- ã¨ã‚Šã‚ãˆãšé©å½“ã«bootstrapã§ä½œã‚‹ããƒ¼ï¼|
- Semantic UIã®ã»ã†ãŒã‚¤ãƒãƒ‰ã‚­ã£ã½ã„ã‚‰ã—ã„|
- Vue.jsã‚’ä½¿ã†ãï¼vue-cli...???|
- ç”ŸCSSè¾›ã„ã‹ã‚‰Sassã«ã—ã‚ˆã†ã€‚ãªãŠStylusã¯(ry|
- Webpack? babel-loader? ãªã«ãã‚ŒãŠã„ã—ã„ã®ï¼Ÿ|
- DivãŒä¸­å¤®ã«å¯„ã‚‰ãªã„ğŸ˜‡|

+++

## ãã‚Œã£ã¦ã‚„ã‚ŠãŸã„ã“ã¨ã ã£ã‘ï¼ŸğŸ¤”

+++

## Don't shave that yakğŸ
- åˆ¥ã«DBã‚’è§¦ã‚ŠãŸã„ã‚ã‘ã§ã¯ãªã„|
- åˆ¥ã«ç”»é¢ã‚’ä½œã‚ŠãŸã„ã‚ã‘ã§ã¯ãªã„|

+++

## ãã“ã§HTTPã‚µãƒ¼ãƒãƒ¼ã§ã™ã‚ˆğŸ˜

+++

## HTTPã‚µãƒ¼ãƒãƒ¼ãªã‚‰

- DBã‚„ç”»é¢ã‚’ç”¨æ„ã™ã‚‹æ‰‹é–“ãªãã€æ‰‹è»½ã«é–‹ç™ºãŒå§‹ã‚ã‚‰ã‚Œã‚‹|
- Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«å¿…è¦ãªè¦ç´ ã«ãã“ãã“ä¸€é€šã‚Šè§¦ã‚Œã‚‰ã‚Œã‚‹|
  - æ–‡å­—åˆ—æ“ä½œã€å…¥å‡ºåŠ›ã€ä¸¦åˆ—å‡¦ç†ãªã©|
- é•ã†è¨€èªã€åŒã˜ä»•æ§˜ã§ä½œã‚Œã°è¨€èªã®æ¯”è¼ƒã‚‚ã—ã‚„ã™ã„|

+++

# ğŸ‘

+++

# HTTPã‚µãƒ¼ãƒãƒ¼ã£ã¦ä½•ã‚’ã—ã¦ã‚‹ã®ï¼ŸğŸ¤”

+++

## HTTPã‚µãƒ¼ãƒãƒ¼ãŒã‚„ã£ã¦ã„ã‚‹ã“ã¨

- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®æ¥ç¶šã‚’å¾…ã¡å—ã‘ã‚‹|
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰é€ã‚‰ã‚Œã¦ããŸHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹|
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«åŸºã¥ã„ã¦HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹|
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™|

+++

## HTTPã®ä»•æ§˜
- Request For Comments|
  - IETFã«ã‚ˆã‚‹æŠ€è¡“ä»•æ§˜ã®ä¿å­˜ã€å…¬é–‹å½¢å¼|
 Â - ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ãŒä¸­å¿ƒ|
- HTTPã¯RFC7230 ~ 7235|

+++

## RFC

+++?image=assets/img/rfc.png&size=contain

https://tools.ietf.org/html/rfc7230

+++?image=assets/img/rfc-html.png&size=contain

http://httpwg.org/

+++

## ç°¡æ˜“ãªå®Ÿè£…ãªã‚‰æ•°ç™¾è¡Œç¨‹åº¦ğŸ‘

+++

## ã‚¤ãƒ¡ãƒ¼ã‚¸

```
$ python -m SimpleHTTPServer # 2ç³»
$ python -m http.server # 3ç³»
```
+++

## ä»Šå›ä½œã‚‹HTTPã‚µãƒ¼ãƒãƒ¼

- localhost:8080ã§å¾…ã¡å—ã‘ã€HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ã¨ã‚Šã€HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™
- å¯¾å¿œã™ã‚‹HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã¯`GET`ã®ã¿ï¼ˆãã‚Œä»¥å¤–ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚GETã¨ã¿ãªã™ï¼‰
- publicãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚ˆã‚Šä¸Šã®éšå±¤ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¯403 Forbiddenã‚’è¿”ã™
- ãƒªã‚½ãƒ¼ã‚¹ã®MIMEã¯å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã§ãã‚‹
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼ˆãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ï¼‰
- Keep-Aliveã¯ã—ãªã„
- HTTP Cacheã¯ã—ãªã„

---

# Scala & Clojure

+++

## Scala

- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã¨é–¢æ•°å‹ã®çµ±åˆã«ã‚ˆã‚‹é«˜ã„è¡¨ç¾åŠ›|
  - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®æ¦‚å¿µã§é–¢æ•°å‹ã®æ©Ÿèƒ½ã‚’è§£é‡ˆ|
  - case class = Value Object / ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹|
- Javaã¨ã®äº’æ›æ€§|

+++

### Scalaã£ã¦ãƒãƒªãƒãƒªã®é–¢æ•°å‹è¨€èªãªã‚“ã§ã—ã‚‡?

+++?image=assets/img/fp-for-mortals.png&size=contain

+++

> Please, don't do this in Scala! â€” Martin Odersky

+++

- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã¨é–¢æ•°å‹ã®**çµ±åˆ**
- å…¨ã¦ã®å€¤ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ãªã©ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨€èªã¨ã—ã¦ã‚‚å„ªã‚ŒãŸå´é¢

+++

## Clojure
- JVMä¸Šã§å‹•ãLispæ–¹è¨€|
- ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã®é–¢æ•°ã€ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€å†å¸°çš„ãªãƒ«ãƒ¼ãƒ—|
- Javaã¨ã®äº’æ›æ€§|
- REPLã‚’æ´»ã‹ã—ãŸã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–/ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ãªé–‹ç™º|
- ä½œè€…ã§ã‚ã‚‹Rich Hickeyã®è€ƒãˆæ–¹|

+++

### Simplicity Matters

> è¨­è¨ˆä¸Šã®æ©Ÿæ•ã• (architectural agility)ã€ã¤ã¾ã‚Šæ ¹æœ¬çš„ã«ã‚·ãƒ³ãƒ—ãƒ«ãªã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦å¾—ã‚‰ã‚Œã‚‹æ©Ÿæ•ã•ã€ã¯ä»–ã®å…¨ã¦ã®æ©Ÿæ•ã•ã‚’åœ§å€’ã™ã‚‹ã¨ã„ã†ã®ãŒåƒ•ã®ä¸»å¼µã§ã™ã€‚ã©ã‚“ãªé–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ã¯é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚

http://eed3si9n.com/ja/simplicity-matters

+++

### Clojureã¨ã€ŒSimple Made Easyã€

> ãƒ†ã‚¹ãƒˆã‚„å‹ã‚·ã‚¹ãƒ†ãƒ ã€å¼·åŠ›ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¯ã€å®‰å…¨æ€§ã‚’é«˜ã‚ã¦ãã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚ã—ã‹ã—ã€ã“ã‚Œã‚‰ã¯å¼·åŠ›ãªã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã§ã¯ã‚ã£ã¦ã‚‚ã€ã‚·ãƒ³ãƒ—ãƒ«ã•ã‚’ä¿è¨¼ã—ã¦ã¯ãã‚Œã¾ã›ã‚“ã€‚
http://boxofpapers.hatenablog.com/entry/simple_made_easy

+++

### Clojureã¨ã€ŒSimple Made Easyã€

> ã ã‹ã‚‰ã€ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨ã„ã†ã®ã¯ã€å¸¸ã«è‡ªåˆ†ã®é¸æŠãªã‚“ã ã€ã¨Richã¯ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ä¸»å¼µã—ã¦ã„ã¾ã™ã€‚

http://boxofpapers.hatenablog.com/entry/simple_made_easy

+++

- ã©ã‚“ãªè¨€èªã‚’ä½¿ã†ã«ã›ã‚ˆã€ã‚·ãƒ³ãƒ—ãƒ«ã•ã«ã¤ã„ã¦è€ƒãˆã‚‹ã®ã¯æ„å‘³ã‚ã‚‹ã“ã¨
- çŠ¶æ…‹ã‚’ã©ã†æ‰±ã†ã‹ãªã©ã€å¤§å¤‰åˆºæ¿€çš„

---

## HTTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚ŠãªãŒã‚‰å­¦ã¼ã†

- 1.ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™
- 2.Socketã®æ‰±ã„
- 3.Input/OutputStreamã®æ‰±ã„
- 4.æ–‡å­—åˆ—/ãƒã‚¤ãƒˆåˆ—ã®æ‰±ã„
- 5.æ­£è¦è¡¨ç¾
- 6.è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
- 7.ãƒªã‚½ãƒ¼ã‚¹ã®é–‹æ”¾
- 8.ä¸¦åˆ—å‡¦ç†

+++

## ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

https://github.com/todokr/simple-http-server


---

# ãƒ¬ã‚·ãƒ”#1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™

---

# ãƒ¬ã‚·ãƒ”#2 Socketã®æ‰±ã„

+++

## Socket?ğŸ¤”

é€šä¿¡ã«ãŠã‘ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¡¨ç¾ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

> TCPã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã®ã‚½ã‚±ãƒƒãƒˆãƒšã‚¢(socket pair)ã¯ã€ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã®ä¸¡æ–¹ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å®šç¾©ã™ã‚‹ã€ãƒ­ãƒ¼ã‚«ãƒ«IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ­ãƒ¼ã‚«ãƒ«TCPãƒãƒ¼ãƒˆã€ãƒªãƒ¢ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãŠã‚ˆã³ãƒªãƒ¢ãƒ¼ãƒˆTCPãƒãƒ¼ãƒˆã®ï¼”ã¤çµ„ã§ã‚ã‚‹ã€‚ã‚ã‚‹ã‚½ã‚±ãƒƒãƒˆãƒšã‚¢ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã®ä¸­ã®ç‰¹å®šã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¸€æ„ã«è­˜åˆ¥ã™ã‚‹ã€‚

> å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è­˜åˆ¥ã™ã‚‹ï¼’ã¤ã®å€¤ã€ã™ãªã‚ã¡**IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆç•ªå·**ã¯ã€å¤šãã®å ´åˆã‚½ã‚±ãƒƒãƒˆ (socket) ã¨å‘¼ã°ã‚Œã‚‹ã€‚

> ã€ŒUNIXãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ ç¬¬ï¼’ç‰ˆ Vol.1 p43

+++?code=java-simple-http-server/src/main/java/SimpleJavaHttpServer.java&lang=java
@[2-3](import)
@[11](ã‚µãƒ¼ãƒãƒ¼ã‚½ã‚±ãƒƒãƒˆã‚’ç”Ÿæˆ)
@[17-19](ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¥ç¶šã‚’å¾…ã¡å—ã‘ã‚‹)

+++?code=scala-simple-http-server/src/main/scala/SimpleHttpServer.scala&lang=scala
@[14](ã‚µãƒ¼ãƒãƒ¼ã‚½ã‚±ãƒƒãƒˆã‚’ç”Ÿæˆ)
@[19-20](ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¥ç¶šã‚’å¾…ã¡å—ã‘ã‚‹)
###

---

# ãƒ¬ã‚·ãƒ”#3 Input/OutputStreamã®æ‰±ã„

---

# ãƒ¬ã‚·ãƒ”#4 æ–‡å­—åˆ—/ãƒã‚¤ãƒˆåˆ—ã®æ‰±ã„

---

# ãƒ¬ã‚·ãƒ”#5 æ­£è¦è¡¨ç¾

---

# ãƒ¬ã‚·ãƒ”#6 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿

+++

## ã‚„ã‚ŠãŸã„ã“ã¨
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‹ã‚‰MIMEã‚’æ±ºå®šã—ãŸã„
 Â - apache/nginxã®mime.typesã¿ãŸã„ãª

+++

```
# MIME type                 Extensions

text/csv                    csv
text/directory
text/dns
text/enriched
text/html                   html htm
text/parityfec
text/plain                  txt text conf def list log in
text/prs.fallenstein.rst
text/prs.lines.tag          dsc
text/red
text/rfc822-headers
text/richtext               rtx
```

+++

### ä»Šå›ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼
- Java  
properties

- Scala  
mime.types

- Clojure  
edn

+++

## Java
- XML
- properties
- JSON/HOCON|
- yaml|

### Java

+++?code=java-simple-http-server/src/main/java/MimeDetector.java&lang=java

Java

@[11](ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ImputStreamã«)
@[12](propertiesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆ)
@[14](InputStreamã‚’ãƒ­ãƒ¼ãƒ‰)
@[25-29](Pathã‹ã‚‰MIMEã‚’æ±ºå®š)
@[28](`props.getProperty(key, defalt);`)

+++

## Scala

- propertiesãªã©ã§ã‚‚è‰¯ã„ãŒ...|
- ãƒ‘ãƒ¼ã‚µã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚¿ã‚’ä½¿ã£ã¦mime.typesã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã¿ã‚‹|

### ãƒ‘ãƒ¼ã‚µã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚¿?ğŸ¤”

- ãƒ‘ãƒ¼ã‚µ(é–¢æ•°)ã‚’å¼•æ•°ã«ã¨ã‚‹é«˜éšé–¢æ•°
- ç°¡å˜ãªãƒ‘ãƒ¼ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã„ãã“ã¨ã§ã€è¤‡é›‘ãªæ§‹æ–‡ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ãƒ‘ãƒ¼ã‚µã‚’ä½œã‚‹ã“ã¨ãŒã§ãã‚‹

+++?code=scala-simple-http-server/build.sbt&lang=scala
@[8](scala-parser-combinatorsã‚’ä¾å­˜é–¢ä¿‚ã«è¿½åŠ )

+++?code=scala-simple-http-server/src/main/scala/MimeDetector.scala&lang=scala
@[20](scala.util.parsing.combinator.RegexParserã‚’extends)
@[22](`#`å§‹ã¾ã‚Šã®ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã‚’èª­ã¿é£›ã°ã™ã‚ˆã†override)

+++

```scala
// types {
//   text/html  htm html shtml;
// }

private def key = """[\w\./+-]+""".r
private def value = repsep("""[\w\./+-]+""".r, """\s""".r)
private def line = key ~ value <~ ";"
private def list = """types\s*\{""".r ~> rep(line) <~ "}"
```

@[4](keyã¯ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆ+è¨˜å·)
@[5](valueã¯ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆ+è¨˜å·ã‚’ç©ºç™½æ–‡å­—ã§åŒºåˆ‡ã£ãŸç¹°ã‚Šè¿”ã—)
@[6](lineã¯keyã«ç¶šã„ãŸvalueã€ãã—ã¦`;`)
@[7](listã¯lineã®ç¹°ã‚Šè¿”ã—ã‚’"types {"ã¨"}"ã§æŒŸã‚“ã ã‚‚ã®)


+++?code=scala-simple-http-server/src/main/scala/MimeDetector.scala&lang=scala
@[31](ãƒ‘ãƒ¼ã‚¹ã®å®Ÿè¡Œ)
@[32-33](ãƒ‘ãƒ¼ã‚¹ã®æˆåŠŸ/å¤±æ•—ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ)
---

## Clojure

### Ednï¼ˆExtensible data notationï¼‰
- Clojureã®ã‚³ãƒ¼ãƒ‰ã®ã‚µãƒ–ã‚»ãƒƒãƒˆ
 Â - Clojureã®ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦è©•ä¾¡ã§ãã‚‹

```clojure
{:name "Fred" 
 :age 23}

https://github.com/edn-format/edn

+++?code=clojure-simple-http-server/src/clojure_simple_http_server/mime_detector.clj&lang=clojure
@[2](clojure.ednã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ)
@[8](resourceãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’java.net.URLã¸)
@[9](å…¨éƒ¨èª­ã‚“ã§æ–‡å­—åˆ—ã«)
@[10](ãƒ‘ãƒ¼ã‚¹ã—ã¦Mapã«)


# ãƒ¬ã‚·ãƒ”#7 ãƒªã‚½ãƒ¼ã‚¹ã®é–‹æ”¾

---

# ãƒ¬ã‚·ãƒ”#8 ä¸¦åˆ—å‡¦ç†

---

# HTTPã‚µãƒ¼ãƒãƒ¼ã®æ¬¡ã¯?

- ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã«é­”æ”¹é€ ã—ã¦Javaã‚’å‹•ã‹ã™
- CGIã‚µãƒ¼ãƒãƒ¼ã«é­”æ”¹é€ ã—ã¦PHPã‚’å‹•ã‹ã™
- L7ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã«é­”æ”¹é€ ã—ã¦è² è·åˆ†æ•£

+++

## ã€Œæ¸‹è°·Javaã€

+++

## ã€Œæ•™é¤Šã¨ã—ã¦ã®Scalaã€

- 12/21 @ ãƒ“ã‚ºãƒªãƒ¼ãƒï¼ˆæ¸‹è°·ï¼‰

+++

## ã€ŒShibuya Lispã€

